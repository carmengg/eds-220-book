{
  "hash": "38691b2975412430e5c9b1013620e6f9",
  "result": {
    "markdown": "<!-- \nFixing the preview working directory\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport os\nhome = os.path.expanduser(\"~\")\nos.chdir(os.path.join(home,'eds-220-book'))\n```\n:::\n\n\n-->\n\n# Raster manipulation\n\nIn this lesson we will learn how to perform some global and local operations on our raster. \nWe will also go over customizations for plotting raster data and review the Python for loop.\n\n## Data\n<!-- https://upload.wikimedia.org/wikipedia/commons/b/bb/Grand_Canyon_National_Park_06.jpg-->\n\nWe will use data from the Copernicus Digital Elevation Model (DEM).\nThis dataset ris based on radar satellite data measuring the relative height of Earth's surface. \nThe Copernicus DEM is available at 30-meter and 90-meter resolution.\nThe data prepared for this class is a tile of 1°x1° latitude/longitude form the Copernicus DEM at 90-meter resolution over the Grand Canyon in the US. \nEach pixel represents vertical units measured in meters. \nThe data was accessed via the [Microsoft’s Planetary Computer Copernicus DEM GLO-30 data repository](https://planetarycomputer.microsoft.com/dataset/cop-dem-glo-30#overview)\n\nClick here to access the [Copernicus DEM complete product Handbook](https://object.cloud.sdsc.edu/v1/AUTH_opentopography/www/metadata/Copernicus_metadata.pdf).\n\n<!--\nTo create a simple map for context we will also use a file with the boundaries of the US National Parks boundaries, provided by the US National Park Service [](https://public-nps.opendata.arcgis.com/datasets/nps::nps-boundary-4/about).\n-->\n\n## Import data\nLet’s start by loading the libraries we’ll use:\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nimport os\nimport numpy as np\n\nimport xarray as xr\nimport rioxarray as rioxr\n```\n:::\n\n\n<!--\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nimport geopandas as gpd\nfrom shapely import Point\n\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\n```\n:::\n\n\n-->\n\n::: {.callout-tip}\n# Exercise\n1. Use `os` to createa file path to the 'grand_canyon_DEM.tif' file and import the raster into a variable called `gc`.\n2. Plot the raster, check the CRS, and create a histogram with updated bin numbers.\n:::\n\n<!--\nAnd then loading our dataset:\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\n# load Grand Canyon DEM data\ndata_path = os.path.join(os.getcwd(),'data','grand_canyon_DEM.tif')\ngc = rioxr.open_rasterio(data_path)\ngc\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2 {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (band: 1, y: 1200, x: 1200)&gt;\n[1440000 values with dtype=float32]\nCoordinates:\n  * band         (band) int64 1\n  * x            (x) float64 -113.0 -113.0 -113.0 ... -112.0 -112.0 -112.0\n  * y            (y) float64 37.0 37.0 37.0 37.0 37.0 ... 36.0 36.0 36.0 36.0\n    spatial_ref  int64 0\nAttributes:\n    AREA_OR_POINT:  Point\n    scale_factor:   1.0\n    add_offset:     0.0</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>band</span>: 1</li><li><span class='xr-has-index'>y</span>: 1200</li><li><span class='xr-has-index'>x</span>: 1200</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-d71b9fbe-389f-49f4-abbd-649d0cef627a' class='xr-array-in' type='checkbox' checked><label for='section-d71b9fbe-389f-49f4-abbd-649d0cef627a' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>...</span></div><div class='xr-array-data'><pre>[1440000 values with dtype=float32]</pre></div></div></li><li class='xr-section-item'><input id='section-2373c13d-b0d5-4f08-aad2-804b65a9031f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-2373c13d-b0d5-4f08-aad2-804b65a9031f' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>band</span></div><div class='xr-var-dims'>(band)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1</div><input id='attrs-0a1a1c81-5272-43df-8d88-08dd0d293843' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0a1a1c81-5272-43df-8d88-08dd0d293843' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-633bc9a4-5dea-449b-ad8d-194ceac63777' class='xr-var-data-in' type='checkbox'><label for='data-633bc9a4-5dea-449b-ad8d-194ceac63777' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-113.0 -113.0 ... -112.0 -112.0</div><input id='attrs-09164902-cd4b-4073-aa62-9701be2320e4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-09164902-cd4b-4073-aa62-9701be2320e4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0f283d05-13fe-47f0-8655-9286e32b2b78' class='xr-var-data-in' type='checkbox'><label for='data-0f283d05-13fe-47f0-8655-9286e32b2b78' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-113.      , -112.999167, -112.998333, ..., -112.0025  , -112.001667,\n       -112.000833])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>37.0 37.0 37.0 ... 36.0 36.0 36.0</div><input id='attrs-e7aa314a-b5dc-4e1a-baf1-b8aec3524fcd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e7aa314a-b5dc-4e1a-baf1-b8aec3524fcd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-954b1c98-35f3-43d6-9eca-641e3fbef6cc' class='xr-var-data-in' type='checkbox'><label for='data-954b1c98-35f3-43d6-9eca-641e3fbef6cc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([37.      , 36.999167, 36.998333, ..., 36.0025  , 36.001667, 36.000833])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-e6208f6c-b8ab-4ce0-b788-f977b761b7f5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e6208f6c-b8ab-4ce0-b788-f977b761b7f5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0d6731ff-f9b8-4846-8bac-7b177b3a1575' class='xr-var-data-in' type='checkbox'><label for='data-0d6731ff-f9b8-4846-8bac-7b177b3a1575' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>-113.00041666666667 0.0008333333333333339 0.0 37.000416666666666 0.0 -0.0008333333333333339</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6fb14802-f272-4404-8cdf-e9c1d4fb4bb6' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6fb14802-f272-4404-8cdf-e9c1d4fb4bb6' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>AREA_OR_POINT :</span></dt><dd>Point</dd><dt><span>scale_factor :</span></dt><dd>1.0</dd><dt><span>add_offset :</span></dt><dd>0.0</dd></dl></div></li></ul></div></div>\n```\n:::\n:::\n\n\nA brief exploration of our dataset:\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\n# exploratory plot\ngc.plot()\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\n<matplotlib.collections.QuadMesh at 0x7f4c4a542910>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](lesson-19-dem_files/figure-html/cell-6-output-2.png){width=581 height=449}\n:::\n:::\n\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\n# check the raster's CRS\ngc.rio.crs\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```\nCRS.from_epsg(4326)\n```\n:::\n:::\n\n\n::: {.cell execution_count=7}\n``` {.python .cell-code}\n# plot histogram of elevation values\n# get bin values output on \"disposable\" variable _ \n_ = gc.plot.hist(bins=50)\n```\n\n::: {.cell-output .cell-output-display}\n![](lesson-19-dem_files/figure-html/cell-8-output-1.png){width=600 height=431}\n:::\n:::\n\n\n::: {.callout-note}\n# `_`\nNotice in the previous line of code we used the underscore `_` to capture the output of the histogram. \nThe underscore `_` is often used in Python to name a \"disposable\" variable we will not use in the future.\n::: \n-->\n\n<!--\n## Geographic context\n\nTo have a better sense of where our raster data is, let's plot one map showing the (general) location of the tile in the world and another one showing the bounding box over the Grand Canyon National Park boundary.\n\n::: {.cell execution_count=8}\n``` {.python .cell-code}\n# get the bounds for our raster\nbounds = gc.rio.bounds()\nbounds\n```\n\n::: {.cell-output .cell-output-display execution_count=8}\n```\n(-113.00041666666667,\n 36.000416666666666,\n -112.00041666666667,\n 37.000416666666666)\n```\n:::\n:::\n\n\n### World map + aoi\nTo show the location of our area of interest (aoi) in the world we will:\n1. load the Natural Earth low-resolution world dataset available through `geopandas`\n2. construct a `gpd.GeoDataFrame` with a single point in it using the `xmin` and `ymin` form the raster's bounds and the raster's crs.\n3. plot the point on top of the worldmap. \n\n::: {.cell execution_count=9}\n``` {.python .cell-code}\n# load Natural Earth worldmap\nworldmap = gpd.read_file(gpd.datasets.get_path(\"naturalearth_lowres\"))\n\ngrand_canyon = gpd.GeoDataFrame(geometry = [Point([bounds[0],bounds[1]])], crs=gc.rio.crs)\n\nfig, ax = plt.subplots()\nax.axis('off')\nworldmap.plot(ax=ax, color = 'lightgray')\ngrand_canyon.plot(ax=ax, marker='*', color='red')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](lesson-19-dem_files/figure-html/cell-10-output-1.png){width=540 height=330}\n:::\n:::\n\n\nYou can check the different types of markers available for points in the [`matplolib` documentation](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html).\n\nTO DO: map of tile relative to Grand Canyon\n\n-->\n\n## Dropping a dimension\n\nNotice that our raster has an unnecessary extra dimension: band.\n\n::: {.cell execution_count=10}\n``` {.python .cell-code}\ngc\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2 {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (band: 1, y: 1200, x: 1200)&gt;\narray([[[1539.077 , 1540.6287, ..., 1557.3568, 1552.1139],\n        [1537.7278, 1538.4757, ..., 1559.02  , 1555.9811],\n        ...,\n        [1947.7771, 1943.48  , ..., 1956.2341, 1966.1176],\n        [1938.799 , 1933.4049, ..., 2055.6274, 2039.6412]]], dtype=float32)\nCoordinates:\n  * band         (band) int64 1\n  * x            (x) float64 -113.0 -113.0 -113.0 ... -112.0 -112.0 -112.0\n  * y            (y) float64 37.0 37.0 37.0 37.0 37.0 ... 36.0 36.0 36.0 36.0\n    spatial_ref  int64 0\nAttributes:\n    AREA_OR_POINT:  Point\n    scale_factor:   1.0\n    add_offset:     0.0</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>band</span>: 1</li><li><span class='xr-has-index'>y</span>: 1200</li><li><span class='xr-has-index'>x</span>: 1200</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-6999842d-d5be-4757-b416-46f2a966b4d3' class='xr-array-in' type='checkbox' checked><label for='section-6999842d-d5be-4757-b416-46f2a966b4d3' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>1.539e+03 1.541e+03 1.541e+03 ... 2.153e+03 2.056e+03 2.04e+03</span></div><div class='xr-array-data'><pre>array([[[1539.077 , 1540.6287, ..., 1557.3568, 1552.1139],\n        [1537.7278, 1538.4757, ..., 1559.02  , 1555.9811],\n        ...,\n        [1947.7771, 1943.48  , ..., 1956.2341, 1966.1176],\n        [1938.799 , 1933.4049, ..., 2055.6274, 2039.6412]]], dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-04796c4d-8285-425f-b004-a5b07e8d0497' class='xr-section-summary-in' type='checkbox'  checked><label for='section-04796c4d-8285-425f-b004-a5b07e8d0497' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>band</span></div><div class='xr-var-dims'>(band)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1</div><input id='attrs-9b9ba9ef-ca39-4329-b458-6c5bfda42597' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9b9ba9ef-ca39-4329-b458-6c5bfda42597' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-990473da-84dd-4667-85ec-ea4a2ffc47ac' class='xr-var-data-in' type='checkbox'><label for='data-990473da-84dd-4667-85ec-ea4a2ffc47ac' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-113.0 -113.0 ... -112.0 -112.0</div><input id='attrs-b6fa7cd7-4775-433c-9ae6-0de15486c22a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b6fa7cd7-4775-433c-9ae6-0de15486c22a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-692e1d99-64d0-4448-a9c0-0219abb9e26a' class='xr-var-data-in' type='checkbox'><label for='data-692e1d99-64d0-4448-a9c0-0219abb9e26a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-113.      , -112.999167, -112.998333, ..., -112.0025  , -112.001667,\n       -112.000833])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>37.0 37.0 37.0 ... 36.0 36.0 36.0</div><input id='attrs-f6f1e146-aab4-4e23-ad8f-3754ca09204f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f6f1e146-aab4-4e23-ad8f-3754ca09204f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0d058cee-5600-421e-abcf-fb542c0b92b7' class='xr-var-data-in' type='checkbox'><label for='data-0d058cee-5600-421e-abcf-fb542c0b92b7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([37.      , 36.999167, 36.998333, ..., 36.0025  , 36.001667, 36.000833])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-85ed7139-1fad-4f4c-9eab-f9db7fba0ee2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-85ed7139-1fad-4f4c-9eab-f9db7fba0ee2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c3e6214e-2768-42f6-a9ef-9da60a486f20' class='xr-var-data-in' type='checkbox'><label for='data-c3e6214e-2768-42f6-a9ef-9da60a486f20' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>-113.00041666666667 0.0008333333333333339 0.0 37.000416666666666 0.0 -0.0008333333333333339</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-53601c9f-96ef-4fa9-9ea5-96fcb6617d10' class='xr-section-summary-in' type='checkbox'  checked><label for='section-53601c9f-96ef-4fa9-9ea5-96fcb6617d10' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>AREA_OR_POINT :</span></dt><dd>Point</dd><dt><span>scale_factor :</span></dt><dd>1.0</dd><dt><span>add_offset :</span></dt><dd>0.0</dd></dl></div></li></ul></div></div>\n```\n:::\n:::\n\n\nThis is making this datsets three-dimensional when it is not needed. \nWe can clean this `xarray.DataArray` a bit by:\n\n1. using the [`squeeze()` method](https://docs.xarray.dev/en/stable/generated/xarray.DataArray.squeeze.html).\nIf we don't pass any parameters, then `squeeze()` gets rid of all dimensions with length one, and then\n\n2. getting rid of the associated coordinates for this dimension. \nWe can do this using the `xarray.DataArray` `drop()` method and specifying the name of the coordinates we want to remove, in this case 'band'.\n\nLet's do this:\n\n::: {.cell execution_count=11}\n``` {.python .cell-code}\n# original dimensions and coordinates\nprint(gc.dims, gc.coords,'\\n')\n\n# remove length 1 dimension (band)\ngc = gc.squeeze()\nprint(gc.dims, gc.coords,'\\n')\n\n# remove coordinates associated to band\ngc = gc.drop('band')\nprint(gc.dims, gc.coords)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n('band', 'y', 'x') Coordinates:\n  * band         (band) int64 1\n  * x            (x) float64 -113.0 -113.0 -113.0 ... -112.0 -112.0 -112.0\n  * y            (y) float64 37.0 37.0 37.0 37.0 37.0 ... 36.0 36.0 36.0 36.0\n    spatial_ref  int64 0 \n\n('y', 'x') Coordinates:\n    band         int64 1\n  * x            (x) float64 -113.0 -113.0 -113.0 ... -112.0 -112.0 -112.0\n  * y            (y) float64 37.0 37.0 37.0 37.0 37.0 ... 36.0 36.0 36.0 36.0\n    spatial_ref  int64 0 \n\n('y', 'x') Coordinates:\n  * x            (x) float64 -113.0 -113.0 -113.0 ... -112.0 -112.0 -112.0\n  * y            (y) float64 37.0 37.0 37.0 37.0 37.0 ... 36.0 36.0 36.0 36.0\n    spatial_ref  int64 0\n```\n:::\n:::\n\n\n## Global information\n\nTo get a better sense of our raster data we can apply common `numpy` functions to extract information from the `xarray.DataArray` underlying `np.array`.\n\nFor example, we can get the maximum across all the `xarray.DataArray`'s values by using the `max()` method:\n\n::: {.cell execution_count=12}\n``` {.python .cell-code}\n# get the maximum elevation value (get an xarray.DataArray)\ngc.max()\n```\n\n::: {.cell-output .cell-output-display execution_count=12}\n```{=html}\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2 {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray ()&gt;\narray(2808.80053711)\nCoordinates:\n    spatial_ref  int64 0</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-3ef7449d-d26b-46ad-acbf-32e09dd856a9' class='xr-array-in' type='checkbox' checked><label for='section-3ef7449d-d26b-46ad-acbf-32e09dd856a9' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>2.809e+03</span></div><div class='xr-array-data'><pre>array(2808.80053711)</pre></div></div></li><li class='xr-section-item'><input id='section-d297be19-1fab-4278-9a6e-cc0993d6e778' class='xr-section-summary-in' type='checkbox'  checked><label for='section-d297be19-1fab-4278-9a6e-cc0993d6e778' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-ddacbd47-84cd-4412-b473-e8a448d5988b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ddacbd47-84cd-4412-b473-e8a448d5988b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d9a9e819-7f76-4c9b-a9e1-7a6c885987bf' class='xr-var-data-in' type='checkbox'><label for='data-d9a9e819-7f76-4c9b-a9e1-7a6c885987bf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>-113.00041666666667 0.0008333333333333339 0.0 37.000416666666666 0.0 -0.0008333333333333339</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e00bc209-0ca3-4393-b4a7-27cdb0063c5b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-e00bc209-0ca3-4393-b4a7-27cdb0063c5b' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>\n```\n:::\n:::\n\n\nNotice that the output for this method is another `xarray.DataArray`. \nIn general, methods that reduce or subset an `xarray.DataArray` will always return another `xarray.DataArray`. \nTo extract the value from a 1x1 `xarray.DataArray` as a number we use the [`.item()` method](#https://docs.xarray.dev/en/stable/generated/xarray.DataArray.item.html):\n\n::: {.cell execution_count=13}\n``` {.python .cell-code}\n# get the maximum elevation value as a number\ngc.max().item()\n```\n\n::: {.cell-output .cell-output-display execution_count=13}\n```\n2808.800537109375\n```\n:::\n:::\n\n\n<!--\nhttps://discuss.codecademy.com/t/what-are-good-reasons-to-use-string-formatting/446707\n\nhttps://stackoverflow.com/questions/57150426/what-is-printf\n-->\n\n## f-strings\n\nSo far we have printed variables using string concatenation inside the `print()` function. \nThis means that we write commas between every string and variable we want to print, and then the print function concatenates these into a single string. For example:\n\n::: {.cell execution_count=14}\n``` {.python .cell-code}\n# minimum elevation\n# print via concatenation\nprint(\"Minimum elevation: \", gc.min().item())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nMinimum elevation:  528.0\n```\n:::\n:::\n\n\nAnother popular way of mixing strings and variables in print statements is by creating an **f-string** which stands for \"formatted string\". \nThe simplest syntax for an f-string is:\n```python\nf\" some text {replace}\"\n```\nwhere `replace` can be a variable, an expression, or a function or method call. \nFor example:\n\n::: {.cell execution_count=15}\n``` {.python .cell-code}\n# f-string with mean elevation\nf\"Mean elevation: {gc.mean().item()}\"\n```\n\n::: {.cell-output .cell-output-display execution_count=15}\n```\n'Mean elevation: 1764.859375'\n```\n:::\n:::\n\n\nWe just created a string replacing the value inside the curly brackets `{}`. \nNotice the computation is occurring in real time as the string gets made and there's no need to define any extra variables.\n\nOne of the advantages of using f-strings is that they offer customization for formatting the output, without the need to use extra functions. \nFor example, if we want to print the median value of our raster rounded to two decimals we can do:\n\n::: {.cell execution_count=16}\n``` {.python .cell-code}\n# median elevation, rounded to two decimals\n# print via f-string formatting\nprint(f\"Median elevation: {gc.median().item():.2f}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nMedian elevation: 1726.15\n```\n:::\n:::\n\n\nSome extra resources about using f-string formatting:\n- [Real Python - Python's F-String for String Interpolation and Formatting](https://realpython.com/python-f-strings/)\n- [Python documentation- Format Specification Mini-Language](https://docs.python.org/3/library/string.html#formatspec)\n\n\n## Aggregation\n\nLet's go back to our raster. \nRasters with high spatial resolution can offer great insight into fine-scale patterns, but can also be challenging to process due to their size. \nIn these cases, it can be useful to use an **aggregation method** to **spatially downsample** and obtain a raster with a coarser resolution. \n\nTo spatially downsample an `xarray.DataArray` we use the [`coarsen()` method](https://xarray.pydata.org/en/v2023.10.1/generated/xarray.DataArray.coarsen.html) followed by an aggreagator function. \nThe general syntax to coarsen a 2-dimensional :\n```python\nxdataarray.coarsen(x=x_winside, y=y_winside).aggr()\n```\nwhere:\n\n- `xdataarray` is a 2-dimensional `xarray.DataArray` with dimensions `x` and `y`. \n- `x` and `y` are the names dimensions of the `xarray.DataArray` (these could have other names like `lon`/`lat`)\n- `x_winside` and `y_winside` are the dimensions of the window used to make the aggregation. \n- `aggr()` is an aggregator function, this is the function which will be applied to each window. Examples are `min()`, `max()`, `sum()` and `mean()`.\n\n**Example**\n\nSuppose we want to coarsen our Grand Canyon elevation raster from 1200x1200 pixels to a raster of 60x60 pixels where by calculating the maximun at each window. \nRemember the windows are non-overlapping, so we will obtain one pixel per window. \nA quick division tells us that to got from 1200x1200 to 60x60 we will need to use a 20x20 window. \nThe aggregator function on each of this window will be `max()`.\nOur call looks like this:\n\n::: {.cell execution_count=17}\n``` {.python .cell-code}\n# coarsen to a 60x60 raster calculating the mean in each window\ngc_coarse = gc.coarsen(x=20,y=20).mean()\ngc_coarse\n```\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=html}\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2 {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (y: 60, x: 60)&gt;\narray([[1517.0162, 1521.1807, 1614.4452, ..., 1602.1825, 1632.0491,\n        1647.5757],\n       [1500.3119, 1524.7173, 1622.7725, ..., 1643.7584, 1640.7683,\n        1764.919 ],\n       [1489.5236, 1512.9801, 1547.7728, ..., 1641.8906, 1645.771 ,\n        1789.8911],\n       ...,\n       [1914.765 , 1878.8464, 1802.3844, ..., 1501.9019, 1236.4778,\n        1229.7344],\n       [1917.3566, 1879.9749, 1859.9656, ..., 1414.1925, 1329.0782,\n        1388.1653],\n       [1919.9823, 1890.4172, 1868.7794, ..., 2007.9066, 1726.9645,\n        1778.2673]], dtype=float32)\nCoordinates:\n  * x            (x) float64 -113.0 -113.0 -113.0 ... -112.0 -112.0 -112.0\n  * y            (y) float64 36.99 36.98 36.96 36.94 ... 36.06 36.04 36.03 36.01\n    spatial_ref  int64 0\nAttributes:\n    AREA_OR_POINT:  Point\n    scale_factor:   1.0\n    add_offset:     0.0</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>y</span>: 60</li><li><span class='xr-has-index'>x</span>: 60</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-38f28a0e-77be-4379-8635-de4988d1c7b0' class='xr-array-in' type='checkbox' checked><label for='section-38f28a0e-77be-4379-8635-de4988d1c7b0' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>1.517e+03 1.521e+03 1.614e+03 ... 2.008e+03 1.727e+03 1.778e+03</span></div><div class='xr-array-data'><pre>array([[1517.0162, 1521.1807, 1614.4452, ..., 1602.1825, 1632.0491,\n        1647.5757],\n       [1500.3119, 1524.7173, 1622.7725, ..., 1643.7584, 1640.7683,\n        1764.919 ],\n       [1489.5236, 1512.9801, 1547.7728, ..., 1641.8906, 1645.771 ,\n        1789.8911],\n       ...,\n       [1914.765 , 1878.8464, 1802.3844, ..., 1501.9019, 1236.4778,\n        1229.7344],\n       [1917.3566, 1879.9749, 1859.9656, ..., 1414.1925, 1329.0782,\n        1388.1653],\n       [1919.9823, 1890.4172, 1868.7794, ..., 2007.9066, 1726.9645,\n        1778.2673]], dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-c2595477-79ee-418e-b888-33384845264c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c2595477-79ee-418e-b888-33384845264c' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-113.0 -113.0 ... -112.0 -112.0</div><input id='attrs-7b02d7d2-6278-4d94-b7d1-c2a4ae366d47' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7b02d7d2-6278-4d94-b7d1-c2a4ae366d47' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6f151d88-f9e4-48e4-9d3e-175e465a5c4d' class='xr-var-data-in' type='checkbox'><label for='data-6f151d88-f9e4-48e4-9d3e-175e465a5c4d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-112.992083, -112.975417, -112.95875 , -112.942083, -112.925417,\n       -112.90875 , -112.892083, -112.875417, -112.85875 , -112.842083,\n       -112.825417, -112.80875 , -112.792083, -112.775417, -112.75875 ,\n       -112.742083, -112.725417, -112.70875 , -112.692083, -112.675417,\n       -112.65875 , -112.642083, -112.625417, -112.60875 , -112.592083,\n       -112.575417, -112.55875 , -112.542083, -112.525417, -112.50875 ,\n       -112.492083, -112.475417, -112.45875 , -112.442083, -112.425417,\n       -112.40875 , -112.392083, -112.375417, -112.35875 , -112.342083,\n       -112.325417, -112.30875 , -112.292083, -112.275417, -112.25875 ,\n       -112.242083, -112.225417, -112.20875 , -112.192083, -112.175417,\n       -112.15875 , -112.142083, -112.125417, -112.10875 , -112.092083,\n       -112.075417, -112.05875 , -112.042083, -112.025417, -112.00875 ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>36.99 36.98 36.96 ... 36.03 36.01</div><input id='attrs-b02dd7cb-4753-428c-9b53-f4fa6783e6e1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b02dd7cb-4753-428c-9b53-f4fa6783e6e1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-def5921a-faba-4a54-af08-b0cd7ec896fc' class='xr-var-data-in' type='checkbox'><label for='data-def5921a-faba-4a54-af08-b0cd7ec896fc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([36.992083, 36.975417, 36.95875 , 36.942083, 36.925417, 36.90875 ,\n       36.892083, 36.875417, 36.85875 , 36.842083, 36.825417, 36.80875 ,\n       36.792083, 36.775417, 36.75875 , 36.742083, 36.725417, 36.70875 ,\n       36.692083, 36.675417, 36.65875 , 36.642083, 36.625417, 36.60875 ,\n       36.592083, 36.575417, 36.55875 , 36.542083, 36.525417, 36.50875 ,\n       36.492083, 36.475417, 36.45875 , 36.442083, 36.425417, 36.40875 ,\n       36.392083, 36.375417, 36.35875 , 36.342083, 36.325417, 36.30875 ,\n       36.292083, 36.275417, 36.25875 , 36.242083, 36.225417, 36.20875 ,\n       36.192083, 36.175417, 36.15875 , 36.142083, 36.125417, 36.10875 ,\n       36.092083, 36.075417, 36.05875 , 36.042083, 36.025417, 36.00875 ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-a064ec77-75bd-48bb-bac3-fce21ac54f3d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a064ec77-75bd-48bb-bac3-fce21ac54f3d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-349db3a4-456b-47ef-8bd5-a1a19ef13932' class='xr-var-data-in' type='checkbox'><label for='data-349db3a4-456b-47ef-8bd5-a1a19ef13932' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>-113.00041666666667 0.0008333333333333339 0.0 37.000416666666666 0.0 -0.0008333333333333339</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-639cc8d1-8e75-4826-82ff-cf30d5c7981f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-639cc8d1-8e75-4826-82ff-cf30d5c7981f' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>AREA_OR_POINT :</span></dt><dd>Point</dd><dt><span>scale_factor :</span></dt><dd>1.0</dd><dt><span>add_offset :</span></dt><dd>0.0</dd></dl></div></li></ul></div></div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=18}\n``` {.python .cell-code}\n# inspect old and coarsened resolution\nprint(f\"old resolution: {gc.rio.width}x{gc.rio.height}\")\nprint(f\"coarse resolution: {gc_coarse.rio.width}x{gc_coarse.rio.height}\")\ngc_coarse.plot()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nold resolution: 1200x1200\ncoarse resolution: 60x60\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=18}\n```\n<matplotlib.collections.QuadMesh at 0x7f4c4bb4c340>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](lesson-19-dem_files/figure-html/cell-19-output-3.png){width=581 height=449}\n:::\n:::\n\n\n<!--\n## Categorization\n\nLet's go back to our original raster. \nLocal operations on rasters refer to operations that are performed cell-by-cell. \nOur NDVI calculation in the previous lesson is such an example. \nAnother popular local operation is to reclassify each cell in the raster as part of group or category. \n\n**Example**\n\nLet's say we want to divide our assign each pixel to which percentile it is in.\n\n::: {.cell execution_count=19}\n``` {.python .cell-code}\nnp.percentile(gc, [25,50,75])\n```\n\n::: {.cell-output .cell-output-display execution_count=19}\n```\narray([1503.36468506, 1726.15148926, 1966.07489014])\n```\n:::\n:::\n\n\n::: {.cell execution_count=20}\n``` {.python .cell-code}\ngc_classes = xr.apply_ufunc(\n    np.digitize,\n    gc,\n    np.percentile(gc,[25,50,75])\n)\ngc_classes.plot()\n```\n\n::: {.cell-output .cell-output-display execution_count=20}\n```\n<matplotlib.collections.QuadMesh at 0x7f4c4ba8cdf0>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](lesson-19-dem_files/figure-html/cell-21-output-2.png){width=568 height=449}\n:::\n:::\n\n\n## For loops and list comprehension\n\n::: {.cell execution_count=21}\n``` {.python .cell-code}\nperc = np.percentile(gc,[0,25,50,75,100])\nperc\n```\n\n::: {.cell-output .cell-output-display execution_count=21}\n```\narray([ 528.        , 1503.36468506, 1726.15148926, 1966.07489014,\n       2808.80053711])\n```\n:::\n:::\n\n\n::: {.cell execution_count=22}\n``` {.python .cell-code}\nfor p in perc:\n  print(p)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n528.0\n1503.3646850585938\n1726.1514892578125\n1966.0748901367188\n2808.800537109375\n```\n:::\n:::\n\n\n::: {.cell execution_count=23}\n``` {.python .cell-code}\nn = len(perc)\nprint(f'number of elements in perc: {n} \\n')\nfor i in range(n):\n  print(f\"index {i}, value: {perc[i]}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nnumber of elements in perc: 5 \n\nindex 0, value: 528.0\nindex 1, value: 1503.3646850585938\nindex 2, value: 1726.1514892578125\nindex 3, value: 1966.0748901367188\nindex 4, value: 2808.800537109375\n```\n:::\n:::\n\n\n::: {.cell execution_count=24}\n``` {.python .cell-code}\n# create an f-string and print it for each index\nfor i in range(n-1):\n  print(f\"{perc[i]:0f} - {perc[i+1] - 1:0f}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n528.000000 - 1502.364685\n1503.364685 - 1725.151489\n1726.151489 - 1965.074890\n1966.074890 - 2807.800537\n```\n:::\n:::\n\n\n::: {.cell execution_count=25}\n``` {.python .cell-code}\n# list comprehension\n[f'{perc[i]:0f} - {perc[i+1] - 1:0f}' for i in range(len(perc)-1)]\n```\n\n::: {.cell-output .cell-output-display execution_count=25}\n```\n['528.000000 - 1502.364685',\n '1503.364685 - 1725.151489',\n '1726.151489 - 1965.074890',\n '1966.074890 - 2807.800537']\n```\n:::\n:::\n\n\n## Graph customization\n\n::: {.cell execution_count=26}\n``` {.python .cell-code}\n# https://matplotlib.org/stable/gallery/color/colormap_reference.html\n# https://matplotlib.org/stable/gallery/color/custom_cmap.html\n# https://stackoverflow.com/questions/37727380/plotting-discrete-colorbar-in-legend-style-using-matplotlib\n\nfig, ax = plt.subplots()\n\n# ============= CUSTOMIZE COLORS ===============\nn_classes = len(np.unique(gc_classes))\ncmap = plt.cm.get_cmap('Oranges', n_classes)\n# ==============================================\n\n#  map elevation raster\ngc_classes.plot.imshow(ax=ax, \n                       add_colorbar=False, # will add custom legend\n                       cmap=cmap)\n\n# ============= CUSTOMIZE LEGEND ===============\n# -- create list of color patches for legend\npatches = [mpatches.Patch(color=cmap(i)) for i in range(n_classes)]\n\n# --- create text for each legend\npercentiles = np.percentile(gc,[0,25,50,75,100])\nlegends = [f'{perc[i]:.0f} - {perc[i+1] - 1:.0f}' for i in range(len((perc))-1)]\n\n# --- update legend\nplt.legend(patches, # color patches\n           legends, # legends\n           loc='center left',  \n           bbox_to_anchor=(1, 0.5), \n           title = 'Elevation (m)')\n# ===============================================\n\n# update title and axis labels\nax.set_title('Elevation at the Grand Canyon')\nax.set_xlabel('Longitude')\nax.set_ylabel('Latitude')\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](lesson-19-dem_files/figure-html/cell-27-output-1.png){width=733 height=449}\n:::\n:::\n\n\n-->\n\n::: {.callout-tip}\n# Exercise\nDownsample the elevation raster into a 240x240 raster by taking the average over windows of the appropriate size. \n\nUse an f-string to check whether the bounds of the rasters have changed.\n:::\n\n",
    "supporting": [
      "lesson-19-dem_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}